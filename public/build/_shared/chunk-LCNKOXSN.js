function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},w(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},c(e,t)}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(e,t,a){return S()?m=Reflect.construct.bind():m=function(n,i,s){var o=[null];o.push.apply(o,i);var d=Function.bind.apply(n,o),u=new d;return s&&c(u,s.prototype),u},m.apply(null,arguments)}function E(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function A(e){var t=typeof Map=="function"?new Map:void 0;return A=function(r){if(r===null||!E(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return m(r,arguments,w(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,r)},A(e)}var h=Object.freeze({left:0,top:0,bottom:0,right:0}),g=Object.freeze({x:.5,y:.5,height:1,width:1});var M=function(t){var a=t.top,r=t.bottom,n=t.left,i=t.right,s=h.top,o=h.bottom,d=h.left,u=h.right;return a===s&&r===o&&n===d&&i===u},q=function(t){var a=t.x,r=t.y,n=t.width,i=t.height,s=g.x,o=g.y,d=g.width,u=g.height;return a===s&&r===o&&n===d&&i===u},p=function(e){R(t,e);function t(a,r){var n;return r===void 0&&(r="Failed to resolve asset ID from source"),n=e.call(this,r)||this,n.unresolvable=!0,n.input=a,n}return t}(A(Error));function z(e){var t=e;return Boolean(t.unresolvable&&"input"in t)}function _(e){return function(){try{return e.apply(void 0,arguments)}catch(t){if(z(t))return;throw t}}}var f="https://cdn.sanity.io",L=/^([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+\.[a-z0-9]+$/;var $=/^([a-zA-Z0-9_]{24,40}|[a-f0-9]{40})-\d+x\d+\.[a-z0-9]+$/;var I=/^(images|files)\/([a-z0-9]+)\/([a-z0-9][-\w]*)\//,F=/^(?:image-(?:[a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-\d+x\d+-[a-z0-9]+|file-(?:[a-zA-Z0-9_]{24,40}|[a-f0-9]{40})+-[a-z0-9]+)$/;function b(e){return v(e)&&typeof e._ref=="string"}function G(e){return v(e)&&typeof e._id=="string"}function j(e){return v(e)&&typeof e.path=="string"}function x(e){return v(e)&&typeof e.url=="string"}function O(e){var t=e;return v(t)&&t.asset&&typeof t.asset=="object"}function v(e){return e!==null&&!Array.isArray(e)&&typeof e=="object"}function N(e){return I.test(T(e)||"")}function P(e){if(O(e))return P(e.asset);if(!b(e)){if(typeof e=="string")return N(e)?y(e):void 0;if(j(e))return e.path;if(x(e))return y(e.url)}}function y(e){if(I.test(e))return e;if(!e.startsWith(f+"/"))throw new p('Failed to resolve path from URL "'+e+'"');var t=e.indexOf("?"),a=t===-1?void 0:t;return e.slice(f.length+1,a)}var T=_(y);var H="image-027401f31c3ac1e6d78c5d539ccd1beff72b9b11-2000x3000-jpg";function W(e){var t=e.split("-"),a=t[1],r=t[2],n=t[3],i=(r||"").split("x").map(Number),s=i[0],o=i[1];if(!a||!r||!n||!(s>0)||!(o>0))throw new Error("Malformed asset ID '"+e+`'. Expected an id like "`+H+'".');return{type:"image",assetId:a,width:s,height:o,extension:n}}function X(e){var t=U(e),a=W(t),r=a.width,n=a.height,i=r/n;return{width:r,height:n,aspectRatio:i}}function U(e){var t=O(e)?e.asset:e,a="";typeof t=="string"?a=Z(t):b(t)?a=t._ref:G(t)?a=t._id:j(t)?a=l(f+"/"+t.path):x(t)&&(a=l(t.url));var r=a&&F.test(a);if(!r)throw new p(e);return a}var D=_(U);function Z(e){if(F.test(e))return e;if(e.indexOf(f+"/images")===0||e.indexOf(f+"/files")===0)return l(e);if(I.test(e))return l(f+"/"+e);if(B(e))return l(f+"/files/a/b/"+e);if(V(e))return l(f+"/images/a/b/"+e);throw new p(e)}function l(e){var t=y(e),a=t.split("/"),r=a[0],n=a[3],i=r.replace(/s$/,"");return i+"-"+n.replace(/\./g,"-")}function Y(e){var t=P(e);if(!t)throw new p(e,"Failed to resolve project ID and dataset from source");var a=t.match(I)||[],r=a[2],n=a[3];if(!r||!n)throw new p(e,"Failed to resolve project ID and dataset from source");return{projectId:r,dataset:n}}function V(e){return $.test(e)}function B(e){return L.test(e)}function k(e){var t=D(e);return t?t.startsWith("file-"):!1}function J(e){var t=D(e);return t?t.startsWith("image-"):!1}export{M as a,q as b,X as c,Y as d,k as e,J as f};
