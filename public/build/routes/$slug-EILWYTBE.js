import{a as le}from"/build/_shared/chunk-6LR2WKBX.js";import{b as ce,c as ae,d as ue,e as fe}from"/build/_shared/chunk-VIEGSFVW.js";import{a as te,h as ne,i as re}from"/build/_shared/chunk-6QSCAR5C.js";import{a as E,g as ie,h as se}from"/build/_shared/chunk-2GFJKGCD.js";import{a as Ee}from"/build/_shared/chunk-PM5GQWRX.js";import{c as oe}from"/build/_shared/chunk-LCNKOXSN.js";import{b as Me}from"/build/_shared/chunk-WRAB7R2F.js";import{a as ee,c as b}from"/build/_shared/chunk-TE2R5WIX.js";import{e as g}from"/build/_shared/chunk-ADMCF34Z.js";var gt=g(Ee());var v=g(ee(),1);var M=[];function Ae(e,t,n=(r,o)=>r===o){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let o=0;o<r;o++)if(!n(e[o],t[o]))return!1;return!0}function qe(e,t,n=!1,r={}){for(let i of M)if(Ae(t,i.keys,i.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return i.response;if(!n)throw i.promise}let o={keys:t,equal:r.equal,promise:e(...t).then(i=>o.response=i).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{let i=M.indexOf(o);i!==-1&&M.splice(i,1)},r.lifespan)}).catch(i=>o.error=i)};if(M.push(o),!n)throw o.promise}var T=(e,t,n)=>qe(e,t,!1,n);var pe=g(b(),1),Be=async(e,t)=>{let n=t?{Authorization:"Bearer ".concat(t)}:void 0,o=await(await fetch("https://".concat(e,".api.sanity.io/v1/users/me"),{credentials:"include",headers:n})).json();return Boolean(o?.id)},je=async()=>{let e=await import("/build/_shared/index.browser-CEDSOBPZ.js"),{groqStore:t}="default"in e?e.default:e;return t},Re=async()=>{let e=await import("/build/_shared/eventsource-Y744M2RR.js"),{EventSourcePolyfill:t}="default"in e?e.default:e;return t};function Ce(e){let t=(0,v.useMemo)(()=>JSON.stringify(e||{}),[e]);return(0,v.useMemo)(()=>JSON.parse(t),[t])}var Fe=e=>{let{projectId:t,dataset:n,documentLimit:r=3e3,subscriptionThrottleMs:o=10,overlayDrafts:i=!0,importEventSourcePolyfill:s,importGroqStore:p,preload:k,onPublicAccessOnly:l,checkAuth:c,includeTypes:f}=e;if(!t)return console.warn("No projectId set for createPreviewHook, returning dummy hook"),function(){return console.warn("The hook returned by createPreviewHook is a dummy as there is no projectId set, returning null"),null};let d;return function(h,y,w,x){if(typeof document>"u")throw new Error("Calling usePreview outside a browser environment isn't supported. Ensure the component using the hook is only rendering on the client. For example by wrapping it in PreviewSuspense.");if(!h&&h!==null)throw new Error("No `token` given to usePreview hook, if this is intentional then set it to `null`");let[S]=(0,v.useState)(()=>x),N=Ce(w);d||(l&&(c(t,h)||l()),d=p()({projectId:t,dataset:n,documentLimit:r,subscriptionThrottleMs:o,includeTypes:f,token:h===null?void 0:h,EventSource:h===null?void 0:s(),listen:!0,overlayDrafts:i}));let X=S??k(d,y,N),j=(0,v.useMemo)(()=>{let I=X;return{getServerSnapshot:S===void 0?void 0:()=>S,getSnapshot:()=>I,subscribe:Y=>{let De=d.subscribe(y,typeof N>"u"?{}:N,(R,Ne)=>{if(R)throw console.error("Error thrown in the usePreviewHook subscription",R),R;I=Ne,Y()});return()=>De.unsubscribe()}}},[X,N,y,S]);return(0,v.useEffect)(()=>{let I=()=>{d.close()};return window.addEventListener("beforeunload",I),()=>window.removeEventListener("beforeunload",I)},[]),(0,v.useSyncExternalStore)(j.subscribe,j.getSnapshot,j.getServerSnapshot)}},Ke=(e,t,n)=>e.query(t,n),de=e=>Fe({...e,importEventSourcePolyfill:()=>T(()=>Re(),["@sanity/preview-kit","event-source-polyfill"]),importGroqStore:()=>T(()=>je(),["@sanity/preview-kit","@sanity/groq-store"]),preload:(t,n,r)=>T(()=>Ke(t,n,r),["@sanity/preview-kit","preload",n,JSON.stringify(r??{})]),checkAuth:(t,n)=>T(()=>Be(t,n),["@sanity/preview-kit","checkAuth",t,n])});function me(e){let{children:t,fallback:n}=e,[r,o]=(0,v.useReducer)(()=>!0,!1);return(0,v.useEffect)(o,[o]),(0,pe.jsx)(v.Suspense,{fallback:n,children:r?t:n})}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(r){He(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function He(e,t,n){return t=Ue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){var t=We(e,"string");return typeof t=="symbol"?t:String(t)}function We(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function F(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function K(e){return F(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function H(e){return e._type==="@list"}function U(e){return e._type==="@span"}function W(e){return e._type==="@text"}var ke=["strong","em","code","underline","strike-through"];function ze(e,t,n){if(!q(e)||!e.marks)return[];if(!e.marks.length)return[];let r=e.marks.slice(),o={};return r.forEach(i=>{o[i]=1;for(let s=t+1;s<n.length;s++){let p=n[s];if(p&&q(p)&&Array.isArray(p.marks)&&p.marks.indexOf(i)!==-1)o[i]++;else break}}),r.sort((i,s)=>Ge(o,i,s))}function Ge(e,t,n){let r=e[t],o=e[n];if(r!==o)return o-r;let i=ke.indexOf(t),s=ke.indexOf(n);return i!==s?i-s:t.localeCompare(n)}function ge(e){var t;let{children:n,markDefs:r=[]}=e;if(!n||!n.length)return[];let o=n.map(ze),i={_type:"@span",children:[],markType:"<unknown>"},s=[i];for(let p=0;p<n.length;p++){let k=n[p];if(!k)continue;let l=o[p]||[],c=1;if(s.length>1)for(c;c<s.length;c++){let d=((t=s[c])==null?void 0:t.markKey)||"",a=l.indexOf(d);if(a===-1)break;l.splice(a,1)}s=s.slice(0,c);let f=s[s.length-1];if(!!f){for(let d of l){let a=r.find(w=>w._key===d),h=a?a._type:d,y={_type:"@span",_key:k._key,children:[],markDef:a,markType:h,markKey:d};f.children.push(y),s.push(y),f=y}if(q(k)){let d=k.text.split(`
`);for(let a=d.length;a-- >1;)d.splice(a,0,`
`);f.children=f.children.concat(d.map(a=>({_type:"@text",text:a})))}else f.children=f.children.concat(k)}}return i.children}function we(e,t){let n=[],r;for(let o=0;o<e.length;o++){let i=e[o];if(!!i){if(!K(i)){n.push(i),r=void 0;continue}if(!r){r=A(i,o,t),n.push(r);continue}if(Je(i,r)){r.children.push(i);continue}if((i.level||1)>r.level){let s=A(i,o,t);if(t==="html"){let p=r.children[r.children.length-1],k=he(he({},p),{},{children:[...p.children,s]});r.children[r.children.length-1]=k}else r.children.push(s);r=s;continue}if((i.level||1)<r.level){let s=n[n.length-1],p=s&&C(s,i);if(p){r=p,r.children.push(i);continue}r=A(i,o,t),n.push(r);continue}if(i.listItem!==r.listItem){let s=n[n.length-1],p=s&&C(s,{level:i.level||1});if(p&&p.listItem===i.listItem){r=p,r.children.push(i);continue}else{r=A(i,o,t),n.push(r);continue}}console.warn("Unknown state encountered for block",i),n.push(i)}}return n}function Je(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function A(e,t,n){return{_type:"@list",_key:"".concat(e._key||"".concat(t),"-parent"),mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function C(e,t){let n=t.level||1,r=t.listItem||"normal",o=typeof t.listItem=="string";if(H(e)&&(e.level||1)===n&&o&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;let i=e.children[e.children.length-1];return i&&!q(i)?C(i,t):void 0}function z(e){let t="";return e.children.forEach(n=>{W(n)?t+=n.text:U(n)&&(t+=z(n))}),t}var ve="html";var u=g(b()),G=g(ee());function $e(e,t){let{block:n,list:r,listItem:o,marks:i,types:s,...p}=t;return{...e,block:_(e,t,"block"),list:_(e,t,"list"),listItem:_(e,t,"listItem"),marks:_(e,t,"marks"),types:_(e,t,"types"),...p}}function _(e,t,n){let r=t[n],o=e[n];return typeof r=="function"||r&&typeof o=="function"?r:r?{...o,...r}:o}var Qe=e=>{let{children:t,value:n}=e;return(0,u.jsx)("a",{href:n?.href,children:t})},Ve={textDecoration:"underline"},Ze={em:e=>{let{children:t}=e;return(0,u.jsx)("em",{children:t})},strong:e=>{let{children:t}=e;return(0,u.jsx)("strong",{children:t})},code:e=>{let{children:t}=e;return(0,u.jsx)("code",{children:t})},underline:e=>{let{children:t}=e;return(0,u.jsx)("span",{style:Ve,children:t})},"strike-through":e=>{let{children:t}=e;return(0,u.jsx)("del",{children:t})},link:Qe},Xe={number:e=>{let{children:t}=e;return(0,u.jsx)("ol",{children:t})},bullet:e=>{let{children:t}=e;return(0,u.jsx)("ul",{children:t})}},Ye=e=>{let{children:t}=e;return(0,u.jsx)("li",{children:t})},L=(e,t)=>"[@portabletext/react] Unknown ".concat(e,", specify a component for it in the `components.").concat(t,"` prop"),Se=e=>L('block type "'.concat(e,'"'),"types"),et=e=>L('mark type "'.concat(e,'"'),"marks"),tt=e=>L('block style "'.concat(e,'"'),"block"),nt=e=>L('list style "'.concat(e,'"'),"list"),rt=e=>L('list item style "'.concat(e,'"'),"listItem");function ot(e){console.warn(e)}var be={display:"none"},it=e=>{let{value:t,isInline:n}=e,r=Se(t._type);return n?(0,u.jsx)("span",{style:be,children:r}):(0,u.jsx)("div",{style:be,children:r})},st=e=>{let{markType:t,children:n}=e;return(0,u.jsx)("span",{className:"unknown__pt__mark__".concat(t),children:n})},lt=e=>{let{children:t}=e;return(0,u.jsx)("p",{children:t})},ct=e=>{let{children:t}=e;return(0,u.jsx)("ul",{children:t})},at=e=>{let{children:t}=e;return(0,u.jsx)("li",{children:t})},ut=()=>(0,u.jsx)("br",{}),ft={normal:e=>{let{children:t}=e;return(0,u.jsx)("p",{children:t})},blockquote:e=>{let{children:t}=e;return(0,u.jsx)("blockquote",{children:t})},h1:e=>{let{children:t}=e;return(0,u.jsx)("h1",{children:t})},h2:e=>{let{children:t}=e;return(0,u.jsx)("h2",{children:t})},h3:e=>{let{children:t}=e;return(0,u.jsx)("h3",{children:t})},h4:e=>{let{children:t}=e;return(0,u.jsx)("h4",{children:t})},h5:e=>{let{children:t}=e;return(0,u.jsx)("h5",{children:t})},h6:e=>{let{children:t}=e;return(0,u.jsx)("h6",{children:t})}},xe={types:{},block:ft,marks:Ze,list:Xe,listItem:Ye,hardBreak:ut,unknownType:it,unknownMark:st,unknownList:ct,unknownListItem:at,unknownBlockStyle:lt};function Ie(e){let{value:t,components:n,listNestingMode:r,onMissingComponent:o=ot}=e,i=o||dt,s=Array.isArray(t)?t:[t],p=we(s,r||ve),k=(0,G.useMemo)(()=>n?$e(xe,n):xe,[n]),l=(0,G.useMemo)(()=>pt(k,i),[k,i]),c=p.map((f,d)=>l({node:f,index:d,isInline:!1,renderNode:l}));return(0,u.jsx)(u.Fragment,{children:c})}var pt=(e,t)=>{function n(l){let{node:c,index:f,isInline:d}=l,a=c._key||"node-".concat(f);return H(c)?o(c,f,a):K(c)?r(c,f,a):U(c)?i(c,f,a):F(c)?s(c,f,a,d):W(c)?p(c,a):k(c,f,a,d)}function r(l,c,f){let d=Pe({node:l,index:c,isInline:!1,renderNode:n}),a=e.listItem,y=(typeof a=="function"?a:a[l.listItem])||e.unknownListItem;if(y===e.unknownListItem){let x=l.listItem||"bullet";t(rt(x),{type:x,nodeType:"listItemStyle"})}let w=d.children;if(l.style&&l.style!=="normal"){let{listItem:x,...S}=l;w=n({node:S,index:c,isInline:!1,renderNode:n})}return(0,u.jsx)(y,{value:l,index:c,isInline:!1,renderNode:n,children:w},f)}function o(l,c,f){let d=l.children.map((w,x)=>n({node:w._key?w:{...w,_key:"li-".concat(c,"-").concat(x)},index:c,isInline:!1,renderNode:n})),a=e.list,y=(typeof a=="function"?a:a[l.listItem])||e.unknownList;if(y===e.unknownList){let w=l.listItem||"bullet";t(nt(w),{nodeType:"listStyle",type:w})}return(0,u.jsx)(y,{value:l,index:c,isInline:!1,renderNode:n,children:d},f)}function i(l,c,f){let{markDef:d,markType:a,markKey:h}=l,y=e.marks[a]||e.unknownMark,w=l.children.map((x,S)=>n({node:x,index:S,isInline:!0,renderNode:n}));return y===e.unknownMark&&t(et(a),{nodeType:"mark",type:a}),(0,u.jsx)(y,{text:z(l),value:d,markType:a,markKey:h,renderNode:n,children:w},f)}function s(l,c,f,d){let{_key:a,...h}=Pe({node:l,index:c,isInline:d,renderNode:n}),y=h.node.style||"normal",x=(typeof e.block=="function"?e.block:e.block[y])||e.unknownBlockStyle;return x===e.unknownBlockStyle&&t(tt(y),{nodeType:"blockStyle",type:y}),(0,u.jsx)(x,{...h,value:h.node,renderNode:n},f)}function p(l,c){if(l.text===`
`){let f=e.hardBreak;return f?(0,u.jsx)(f,{},c):`
`}return l.text}function k(l,c,f,d){let a=e.types[l._type],h={value:l,isInline:d,index:c,renderNode:n};if(a)return(0,u.jsx)(a,{...h},f);t(Se(l._type),{nodeType:"block",type:l._type});let y=e.unknownType;return(0,u.jsx)(y,{...h},f)}return n};function Pe(e){let{node:t,index:n,isInline:r,renderNode:o}=e,s=ge(t).map((p,k)=>o({node:p,isInline:!0,index:k,renderNode:o}));return{_key:t._key||"block-".concat(n),children:s,index:n,isInline:r,node:t}}function dt(){}var Te=g(Me());var _e=g(b());function J(e){let{value:t,isInline:n}=e,{width:r,height:o}=oe(t);return(0,_e.jsx)("img",{className:"not-prose h-auto w-full",src:(0,Te.default)(E()).image(t).width(n?100:800).fit("max").auto("format").url(),alt:t.alt||"",loading:"lazy",style:{display:n?"inline-block":"block",aspectRatio:r/o}})}var $=g(b()),mt={types:{image:J}};function Q(e){let{value:t}=e;return(0,$.jsx)("div",{className:"prose font-serif prose-a:text-cyan-600 dark:prose-invert dark:prose-a:text-cyan-200 md:prose-2xl",children:(0,$.jsx)(Ie,{value:t,components:mt})})}var P=g(b());function V(e){let{id:t}=e,n=re(),r=te(),o=n.type==="done"?n.data.likes:e.likes,i=n.type==="done"?n.data.dislikes:e.dislikes;return(0,P.jsxs)(n.Form,{action:r.pathname,className:"flex items-center justify-center gap-4 bg-black text-white",method:"post",children:[(0,P.jsx)("input",{name:"id",type:"hidden",value:t}),(0,P.jsxs)("button",{name:"action",type:"submit",value:"LIKE",disabled:n.state!=="idle",className:"flex items-center gap-2 bg-black p-4 transition-all duration-100 ease-in-out hover:bg-cyan-400 hover:text-black disabled:opacity-50",title:"Like",children:[(0,P.jsx)("span",{className:"text-xs font-bold",children:o}),(0,P.jsx)(se,{}),(0,P.jsx)("span",{className:"sr-only",children:"Like"})]}),(0,P.jsxs)("button",{name:"action",type:"submit",value:"DISLIKE",disabled:n.state!=="idle",className:"flex items-center gap-2 bg-black p-4 transition-all duration-100 ease-in-out hover:bg-cyan-400 hover:text-black disabled:opacity-50",title:"Dislike",children:[(0,P.jsx)(ie,{}),(0,P.jsx)("span",{className:"text-xs font-bold",children:i}),(0,P.jsx)("span",{className:"sr-only",children:"Dislike"})]})]})}var B=g(b());function Z(){return(0,B.jsx)("div",{className:"pointer-events-none fixed inset-0 flex h-screen w-screen items-end justify-center",children:(0,B.jsx)("form",{className:"pointer-events-auto",action:"/resource/preview",method:"POST",children:(0,B.jsx)("button",{className:"bg-black p-4 font-bold text-white",type:"submit",children:"Exit Preview Mode"})})})}var m=g(b());function O(e){let{_id:t,title:n,category:r,content:o,image:i,features:s,likes:p,dislikes:k}=e;return(0,m.jsx)(ae,{children:(0,m.jsxs)("article",{className:"flex flex-col items-start gap-4 lg:flex-row lg:gap-12",children:[(0,m.jsxs)("div",{className:"grid-gap-4 mx-auto grid max-w-[70vw] grid-cols-1",children:[(0,m.jsx)(fe,{image:i,title:n}),(0,m.jsx)(V,{id:t,likes:p,dislikes:k})]}),(0,m.jsxs)("div",{className:"flex flex-shrink-0 flex-col gap-4 md:gap-6 lg:w-2/3",children:[(0,m.jsxs)("header",{children:[n?(0,m.jsx)(ue,{children:n}):null,r?(0,m.jsx)("h2",{className:"featureing-tighter bg-black text-2xl font-bold text-white",children:r}):null]}),o&&(o==null?void 0:o.length)>0?(0,m.jsx)(Q,{value:o}):null,(0,m.jsx)("a",{href:"www.test.com",className:"mr-auto w-auto border-2 border-purple-500 py-4 px-12 text-purple-500",children:"Try Out Now"}),s&&(s==null?void 0:s.length)>0?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("ul",{className:"grid grid-cols-1 divide-y divide-gray-100 dark:divide-gray-900",children:[(0,m.jsx)("li",{className:"featureing-tighter py-3 text-2xl font-bold",children:(s==null?void 0:s.length)===1?"1 Feature":`${s==null?void 0:s.length} Key Features`}),s.map(l=>(0,m.jsxs)("li",{className:"flex items-center justify-between py-3",children:[(0,m.jsx)("span",{className:"text-lg",children:l.title}),l.duration?(0,m.jsx)("span",{className:"text-sm font-bold",children:le(l.duration)}):null]},l._key))]})}):null]})]})})}var{projectId:yt,dataset:ht}=E(),kt=de({projectId:yt,dataset:ht});function Le(e){let{query:t,params:n,token:r}=e,o=kt(r!=null?r:null,t,n);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Z,{}),(0,m.jsx)(O,{...o})]})}var D=g(b()),wt=()=>[{rel:"stylesheet",href:ce}],vt=({data:e,parentsData:t})=>{let n=t.root.home;return{title:[e.product.title,n.siteTitle].filter(Boolean).join(" | ")}};function Oe(){let{product:e,preview:t,query:n,params:r,token:o}=ne();return t&&n&&r&&o?(0,D.jsx)(me,{fallback:(0,D.jsx)(O,{...e}),children:(0,D.jsx)(Le,{query:n,params:r,token:o})}):(0,D.jsx)(O,{...e})}export{Oe as default,wt as links,vt as meta};
