{
  "version": 3,
  "sources": ["../../../../app/routes/categories/$slug.tsx"],
  "sourcesContent": ["/* eslint-disable prettier/prettier */\n// File: /categories/$slug.tsx\n\nimport { Link, useLoaderData, useParams } from '@remix-run/react';\nimport groq from 'groq';\nimport { json } from '@remix-run/node';\nimport { categoryZ, productStubsZ } from '~/types/product';\n\nimport type { LinksFunction, LoaderArgs } from '@remix-run/node';\nimport Layout from '~/components/Layout';\nimport stylesheet from '~/tailwind.css';\nimport AlbumCover from '~/components/RecordCover';\n\nimport { getClient } from '~/sanity/client';\n\nexport const links: LinksFunction = () => {\n  return [{ rel: 'stylesheet', href: stylesheet }];\n};\n\n// Load the `category` document with this slug\nexport const loader = async (props: LoaderArgs) => {\n  const { slug } = props.params;\n  const categoryQuery = groq`*[_type == \"category\" && slug.current == $slug][0] {\n    title,\n    slug\n  }`;\n\n  const category = await getClient()\n    .fetch(categoryQuery, { slug })\n    .then((res) => (res ? categoryZ.parse(res) : null));\n\n  if (!category) {\n    throw new Response('Not found', { status: 404 });\n  }\n\n  const productsQuery = groq`*[_type == \"product\" && references(*[_type == \"category\" && slug.current == $slug]._id)] | order(publishedAt desc) [0...12]{\n    _id,\n    title,\n    metadescription,\n    \"slug\": slug.current,\n    \"category\": category->title,\n    image\n  }`;\n\n  const products = await getClient()\n    .fetch(productsQuery, { slug })\n    .then((res) => (res ? productStubsZ.parse(res) : null));\n\n  if (!products) {\n    throw new Response('Not found', { status: 404 });\n  }\n\n  return json({ category, products });\n};\n\nexport default function Categories() {\n  const { category, products } = useLoaderData<typeof loader>();\n  const params = useParams();\n\n  return (\n    <Layout>\n      <div>\n        <h2>A list of products from the {params.slug} category</h2>\n        {products.length > 0 ? (\n          <div className='grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3'>\n            {products.map((product) => (\n              <div key={product._id} className='rounded border p-4'>\n                <h3 className='text-xl'>{product.title}</h3>\n                {product.image && (\n                  <>\n                    <AlbumCover image={product.image} title={product.title} />\n                  </>\n                )}\n                <p>{product.category}</p>\n                <Link to={`/products/${product.slug}`} className='underline'>\n                  View Product\n                </Link>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p>No products found with this tag.</p>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAIA,kBAAiB;AA0DT;AA/CD,IAAM,QAAuB,MAAM;AACxC,SAAO,CAAC,EAAE,KAAK,cAAc,MAAM,iBAAW,CAAC;AACjD;AAsCe,SAAR,aAA8B;AACnC,QAAM,EAAE,UAAU,SAAS,IAAI,cAA6B;AAC5D,QAAM,SAAS,UAAU;AAEzB,SACE,mDAAC,UACC,6DAAC,SACC;AAAA,uDAAC,QAAG;AAAA;AAAA,MAA6B,OAAO;AAAA,MAAK;AAAA,SAA7C;AAAA;AAAA;AAAA;AAAA,WAAsD;AAAA,IACrD,SAAS,SAAS,IACjB,mDAAC,SAAI,WAAU,wDACZ,mBAAS,IAAI,CAAC,YACb,mDAAC,SAAsB,WAAU,sBAC/B;AAAA,yDAAC,QAAG,WAAU,WAAW,kBAAQ,SAAjC;AAAA;AAAA;AAAA;AAAA,aAAuC;AAAA,MACtC,QAAQ,SACP,sFACE,6DAAC,eAAW,OAAO,QAAQ,OAAO,OAAO,QAAQ,SAAjD;AAAA;AAAA;AAAA;AAAA,aAAwD,KAD1D;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,MAEF,mDAAC,OAAG,kBAAQ,YAAZ;AAAA;AAAA;AAAA;AAAA,aAAqB;AAAA,MACrB,mDAAC,QAAK,IAAI,aAAa,QAAQ,QAAQ,WAAU,aAAY,4BAA7D;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SAVQ,QAAQ,KAAlB;AAAA;AAAA;AAAA;AAAA,WAWA,CACD,KAdH;AAAA;AAAA;AAAA;AAAA,WAeA,IAEA,mDAAC,OAAE,gDAAH;AAAA;AAAA;AAAA;AAAA,WAAmC;AAAA,OApBvC;AAAA;AAAA;AAAA;AAAA,SAsBA,KAvBF;AAAA;AAAA;AAAA;AAAA,SAwBA;AAEJ;",
  "names": []
}
