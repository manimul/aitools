{
  "version": 3,
  "sources": ["../../../../app/routes/tags/$slug.tsx"],
  "sourcesContent": ["/* eslint-disable prettier/prettier */\nimport { Link, useLoaderData, useParams } from '@remix-run/react';\nimport groq from 'groq';\nimport { json } from '@remix-run/node';\nimport { tagZ, productStubsZ } from '~/types/product';\n\nimport type { LinksFunction, LoaderArgs } from '@remix-run/node';\nimport Layout from '~/components/Layout';\nimport stylesheet from '~/tailwind.css';\nimport { getClient } from '~/sanity/client';\nimport AlbumCover from '~/components/RecordCover';\nimport Title from '~/components/Title';\nimport ProductCard from '~/components/ProductCard';\n\nexport const links: LinksFunction = () => {\n  return [{ rel: 'stylesheet', href: stylesheet }];\n};\n\n// Load the `product` document with this slug\nexport const loader = async (props: LoaderArgs) => {\n  const query = groq`*[_type == \"tag\" && title == \"homework\"][0] {\n    title,\n    slug\n  }`;\n\n  const tag = await getClient()\n    .fetch(query)\n    .then((res) => (res ? tagZ.parse(res) : null));\n\n  if (!tag) {\n    throw new Response('Not found', { status: 404 });\n  }\n  const { slug } = props.params;\n\n  const query2 = groq`*[_type == \"product\" && references(*[_type == \"tag\" && slug.current == $slug]._id)] | order(publishedAt desc) [0...12]{\n    _id,\n    title,\n    metadescription,\n    \"slug\": slug.current,\n    \"category\": category->title,\n  \n    image\n  }`;\n\n  const products = await getClient()\n    .fetch(query2, { slug })\n    .then((res) => (res ? productStubsZ.parse(res) : null));\n\n  if (!products) {\n    throw new Response('Not found', { status: 404 });\n  }\n\n  return json({ tag, products });\n};\n\nexport default function Tags() {\n  const { tag, products } = useLoaderData<typeof loader>();\n\n  const params = useParams();\n\n  return (\n    <Layout>\n      <div>\n        <section className=' mb-6 border p-6  '>\n          <div className='mx-auto grid   py-8 lg:grid-cols-12 lg:gap-8 lg:py-16 xl:gap-0'>\n            <div className='mr-auto space-y-2 place-self-center lg:col-span-7'>\n              <header className='space-y-4'>\n                <Title>A list of products tagged with \"{params.slug}\"</Title>\n              </header>\n            </div>\n            <div className='hidden lg:col-span-5 lg:mt-0 lg:flex'>\n              <img></img>{' '}\n            </div>\n          </div>\n        </section>\n        {products.length > 0 ? (\n          <div className='grid  gap-6 md:grid-cols-3 md:gap-16'>\n            {products.map((product) => (\n              <ProductCard key={product._id} product={product} />\n            ))}\n          </div>\n        ) : (\n          <p>No products found with this tag.</p>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,kBAAiB;AAiED;AArDT,IAAM,QAAuB,MAAM;AACxC,SAAO,CAAC,EAAE,KAAK,cAAc,MAAM,iBAAW,CAAC;AACjD;AAuCe,SAAR,OAAwB;AAC7B,QAAM,EAAE,KAAK,SAAS,IAAI,cAA6B;AAEvD,QAAM,SAAS,UAAU;AAEzB,SACE,mDAAC,UACC,6DAAC,SACC;AAAA,uDAAC,aAAQ,WAAU,sBACjB,6DAAC,SAAI,WAAU,kEACb;AAAA,yDAAC,SAAI,WAAU,qDACb,6DAAC,YAAO,WAAU,aAChB,6DAAC,SAAM;AAAA;AAAA,QAAiC,OAAO;AAAA,QAAK;AAAA,WAApD;AAAA;AAAA;AAAA;AAAA,aAAqD,KADvD;AAAA;AAAA;AAAA;AAAA,aAEA,KAHF;AAAA;AAAA;AAAA;AAAA,aAIA;AAAA,MACA,mDAAC,SAAI,WAAU,wCACb;AAAA,2DAAC,WAAD;AAAA;AAAA;AAAA;AAAA,eAAK;AAAA,QAAO;AAAA,WADd;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SARF;AAAA;AAAA;AAAA;AAAA,WASA,KAVF;AAAA;AAAA;AAAA;AAAA,WAWA;AAAA,IACC,SAAS,SAAS,IACjB,mDAAC,SAAI,WAAU,wCACZ,mBAAS,IAAI,CAAC,YACb,mDAAC,eAA8B,WAAb,QAAQ,KAA1B;AAAA;AAAA;AAAA;AAAA,WAAiD,CAClD,KAHH;AAAA;AAAA;AAAA;AAAA,WAIA,IAEA,mDAAC,OAAE,gDAAH;AAAA;AAAA;AAAA;AAAA,WAAmC;AAAA,OApBvC;AAAA;AAAA;AAAA;AAAA,SAsBA,KAvBF;AAAA;AAAA;AAAA;AAAA,SAwBA;AAEJ;",
  "names": []
}
