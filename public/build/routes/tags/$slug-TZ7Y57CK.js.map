{
  "version": 3,
  "sources": ["../../../../app/routes/tags/$slug.tsx"],
  "sourcesContent": ["/* eslint-disable prettier/prettier */\nimport { Link, useLoaderData, useParams } from '@remix-run/react';\nimport groq from 'groq';\nimport { json } from '@remix-run/node';\nimport { tagZ, productStubsZ } from '~/types/product';\n\nimport type { LinksFunction, LoaderArgs } from '@remix-run/node';\nimport Layout from '~/components/Layout';\nimport stylesheet from '~/tailwind.css';\nimport { getClient } from '~/sanity/client';\nimport AlbumCover from '~/components/RecordCover';\nimport Title from '~/components/Title';\n\nexport const links: LinksFunction = () => {\n  return [{ rel: 'stylesheet', href: stylesheet }];\n};\n\n// Load the `product` document with this slug\nexport const loader = async (props: LoaderArgs) => {\n  const query = groq`*[_type == \"tag\" && title == \"homework\"][0] {\n    title,\n    slug\n  }`;\n\n  const tag = await getClient()\n    .fetch(query)\n    .then((res) => (res ? tagZ.parse(res) : null));\n\n  if (!tag) {\n    throw new Response('Not found', { status: 404 });\n  }\n  const { slug } = props.params;\n\n  const query2 = groq`*[_type == \"product\" && references(*[_type == \"tag\" && slug.current == $slug]._id)] | order(publishedAt desc) [0...12]{\n    _id,\n    title,\n    metadescription,\n    \"slug\": slug.current,\n    \"category\": category->title,\n    image\n  }`;\n\n  const products = await getClient()\n    .fetch(query2, { slug })\n    .then((res) => (res ? productStubsZ.parse(res) : null));\n\n  if (!products) {\n    throw new Response('Not found', { status: 404 });\n  }\n\n  return json({ tag, products });\n};\n\nexport default function Tags() {\n  const { tag, products } = useLoaderData<typeof loader>();\n\n  const params = useParams();\n\n  return (\n    <Layout>\n      <div>\n        <section className=' mb-6 border p-6  '>\n          <div className='mx-auto grid   py-8 lg:grid-cols-12 lg:gap-8 lg:py-16 xl:gap-0'>\n            <div className='mr-auto space-y-2 place-self-center lg:col-span-7'>\n              <header className='space-y-4'>\n                <Title>A list of products tagged with \"{params.slug}\"</Title>\n              </header>\n            </div>\n            <div className='hidden lg:col-span-5 lg:mt-0 lg:flex'>\n              <img></img>{' '}\n            </div>\n          </div>\n        </section>\n        {products.length > 0 ? (\n          <div className='grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3'>\n            {products.map((product) => (\n              <div key={product._id} className='rounded border p-4'>\n                <h3 className='text-xl'>{product.title}</h3>\n                {product.image && (\n                  <>\n                    <AlbumCover image={product.image} title={product.title} />\n                  </>\n                )}\n                <p>{product.category}</p>\n                <Link to={`/products/${product.slug}`} className='underline'>\n                  View Product\n                </Link>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p>No products found with this tag.</p>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,kBAAiB;AA+DD;AApDT,IAAM,QAAuB,MAAM;AACxC,SAAO,CAAC,EAAE,KAAK,cAAc,MAAM,iBAAW,CAAC;AACjD;AAsCe,SAAR,OAAwB;AAC7B,QAAM,EAAE,KAAK,SAAS,IAAI,cAA6B;AAEvD,QAAM,SAAS,UAAU;AAEzB,SACE,mDAAC,UACC,6DAAC,SACC;AAAA,uDAAC,aAAQ,WAAU,sBACjB,6DAAC,SAAI,WAAU,kEACb;AAAA,yDAAC,SAAI,WAAU,qDACb,6DAAC,YAAO,WAAU,aAChB,6DAAC,SAAM;AAAA;AAAA,QAAiC,OAAO;AAAA,QAAK;AAAA,WAApD;AAAA;AAAA;AAAA;AAAA,aAAqD,KADvD;AAAA;AAAA;AAAA;AAAA,aAEA,KAHF;AAAA;AAAA;AAAA;AAAA,aAIA;AAAA,MACA,mDAAC,SAAI,WAAU,wCACb;AAAA,2DAAC,WAAD;AAAA;AAAA;AAAA;AAAA,eAAK;AAAA,QAAO;AAAA,WADd;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SARF;AAAA;AAAA;AAAA;AAAA,WASA,KAVF;AAAA;AAAA;AAAA;AAAA,WAWA;AAAA,IACC,SAAS,SAAS,IACjB,mDAAC,SAAI,WAAU,wDACZ,mBAAS,IAAI,CAAC,YACb,mDAAC,SAAsB,WAAU,sBAC/B;AAAA,yDAAC,QAAG,WAAU,WAAW,kBAAQ,SAAjC;AAAA;AAAA;AAAA;AAAA,aAAuC;AAAA,MACtC,QAAQ,SACP,sFACE,6DAAC,eAAW,OAAO,QAAQ,OAAO,OAAO,QAAQ,SAAjD;AAAA;AAAA;AAAA;AAAA,aAAwD,KAD1D;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,MAEF,mDAAC,OAAG,kBAAQ,YAAZ;AAAA;AAAA;AAAA;AAAA,aAAqB;AAAA,MACrB,mDAAC,QAAK,IAAI,aAAa,QAAQ,QAAQ,WAAU,aAAY,4BAA7D;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SAVQ,QAAQ,KAAlB;AAAA;AAAA;AAAA;AAAA,WAWA,CACD,KAdH;AAAA;AAAA;AAAA;AAAA,WAeA,IAEA,mDAAC,OAAE,gDAAH;AAAA;AAAA;AAAA;AAAA,WAAmC;AAAA,OA/BvC;AAAA;AAAA;AAAA;AAAA,SAiCA,KAlCF;AAAA;AAAA;AAAA;AAAA,SAmCA;AAEJ;",
  "names": []
}
