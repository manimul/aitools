import{a as R}from"/build/_shared/chunk-6LR2WKBX.js";import{a as k,b as T,c as D,f as O,i as M}from"/build/_shared/chunk-WGBMKJYN.js";import{a as Ge}from"/build/_shared/chunk-PM5GQWRX.js";import{Ga as P,Ia as ee,Ka as L,Na as p,Oa as te,P as d,Pa as C,Q as u,Qa as z,Qc as qe,Ra as re,da as q,jc as oe,ka as K,la as X,rd as j,va as Z,vb as Qe,zb as Ye}from"/build/_shared/chunk-6ORFEM36.js";import"/build/_shared/chunk-2WXH3QX5.js";import"/build/_shared/chunk-BT6BK5OL.js";import"/build/_shared/chunk-LCNKOXSN.js";import"/build/_shared/chunk-WRAB7R2F.js";import{a as o,c as S}from"/build/_shared/chunk-TE2R5WIX.js";import{e as t}from"/build/_shared/chunk-ADMCF34Z.js";var b=t(S());var F=t(o()),ne=!0;function ie(){let[e,r]=(0,F.useState)(()=>!ne);return(0,F.useEffect)(function(){ne=!1,r(!0)},[]),e}function se({children:e,fallback:r=null}){return ie()?(0,b.jsx)(b.Fragment,{children:e()}):(0,b.jsx)(b.Fragment,{children:r})}var ue="/build/_assets/studio-CZ6JLOEM.css";var ur=t(S()),ar=t(o());var dr=t(Ye());var mr=t(qe()),pr=t(Qe());var ae=d({name:"artist",title:"Artist",type:"document",icon:M,fields:[u({name:"title",type:"string"}),u({name:"slug",type:"slug",options:{source:"title"}}),u({name:"image",type:"image",options:{hotspot:!0}})]});var ce=d({name:"genre",title:"Genre",type:"document",icon:O,fields:[u({name:"title",type:"string"}),u({name:"slug",type:"slug",options:{source:"title"}})]});var le=d({name:"home",title:"Home",type:"document",icon:D,fields:[u({name:"title",type:"string"}),u({name:"siteTitle",type:"string"})],preview:{select:{title:"title",artist:"siteTitle"}}});var de=d({name:"record",title:"Record",type:"document",icon:T,fieldsets:[{name:"rating",title:"Rating",options:{columns:2}}],groups:[{name:"details",title:"Details"},{name:"editorial",title:"Editorial"},{name:"tracks",title:"Tracks"}],fields:[u({name:"title",type:"string",group:"details"}),u({name:"slug",type:"slug",options:{source:"title"},group:"details"}),u({name:"likes",type:"number",readOnly:!0,fieldset:"rating"}),u({name:"dislikes",type:"number",readOnly:!0,fieldset:"rating"}),u({name:"artist",type:"reference",to:[{type:"artist"}],group:"details"}),u({name:"genres",type:"array",of:[{type:"reference",to:{type:"genre"}}],group:"details"}),u({name:"content",type:"array",of:[{type:"block"},{type:"image"}],group:"editorial"}),u({name:"image",type:"image",options:{hotspot:!0},group:"editorial"}),u({name:"tracks",type:"array",of:[{type:"track"}],group:"tracks"})],preview:{select:{title:"title",artist:"artist.title",media:"image"},prepare({title:e,artist:r,media:n}){return{title:e,subtitle:r,media:n}}}});var I=t(S());function H(e){return(0,I.jsxs)(p,{gap:3,align:"center",children:[(0,I.jsx)(L,{flex:1,children:e.renderDefault(e)}),e.value?(0,I.jsx)(re,{size:4,children:R(e.value)}):null]})}var fe=d({name:"track",title:"Track",type:"object",fields:[u({name:"title",type:"string"}),u({name:"duration",description:"Time in seconds",type:"number",components:{input:H}})],preview:{select:{title:"title",duration:"duration"},prepare({title:e,duration:r}){return{title:e,subtitle:R(r)}}}});var me=[de,ae,fe,ce,le];var a=t(S()),h=t(o());var pe=t(o());var ge=t(o()),Xe=function(e,r,n,i){function c(s){return s instanceof n?s:new n(function(f){f(s)})}return new(n||(n=Promise))(function(s,f){function l(m){try{v(i.next(m))}catch(w){f(w)}}function _(m){try{v(i.throw(m))}catch(w){f(w)}}function v(m){m.done?s(m.value):c(m.value).then(l,_)}v((i=i.apply(e,r||[])).next())})};function Ze(){let[e,r]=(0,ge.useState)(null);return[e,i=>Xe(this,void 0,void 0,function*(){if(!navigator?.clipboard)return console.warn("Clipboard not supported"),!1;try{return yield navigator.clipboard.writeText(i),r(i),!0}catch(c){return console.warn("Copy failed",c),r(null),!1}})]}var U=Ze;var tt=t(o());var nt=t(o());var we=t(o());var it=t(o());var xe=t(o());var Se=t(o());var be=t(o());var N=t(o());var st=t(o());var ut=t(o());var Ee=t(o());var Ce=t(o());var Ie=t(o());var at=t(o());var V=t(o());var ke=t(o());var W=t(o());var Te=t(o());var De=t(o());var Oe=t(o());var A=t(o());var ct=t(o());var Me=t(o());var $=t(o());var J=t(o());var Re=t(o());var Fe=t(o());var _e=t(o());var dt=t(o());var ft=t(o());function Be(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function mt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Be(Object(n),!0).forEach(function(i){pt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function pt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var G={desktop:{width:"100%",height:"100%",maxHeight:"100%"},mobile:{width:414,height:"100%",maxHeight:736}},Pe="desktop";function ze(e){let{document:r,options:n}=e,{url:i,defaultSize:c=Pe,reload:s,attributes:f={}}=n,[l,_]=(0,h.useState)(i&&typeof i=="string"?i:""),[v,m]=(0,h.useState)(G?.[c]?c:Pe),w=(0,h.useRef)(null),E=(0,h.useRef)(null),{displayed:B}=r,[,Je]=U();function Y(){E?.current&&(E.current.src=E.current.src)}return(0,h.useEffect)(()=>{(s?.revision||s?.revision==0)&&setTimeout(()=>{Y()},Number(s?.revision))},[B._rev,s?.revision]),(0,h.useEffect)(()=>{typeof i=="function"&&(async()=>{let x=typeof i=="function"?await i(B):"";x!==l&&x&&typeof x=="string"&&_(x)})()},[B._rev]),l&&typeof l=="string"?(0,a.jsxs)(P,{children:[(0,a.jsx)("textarea",{style:{position:"absolute",pointerEvents:"none",opacity:0},ref:w,value:l,readOnly:!0,tabIndex:-1}),(0,a.jsxs)(p,{direction:"column",style:{height:"100%"},children:[(0,a.jsx)(z,{padding:2,borderBottom:!0,children:(0,a.jsxs)(p,{align:"center",gap:2,children:[(0,a.jsx)(p,{align:"center",gap:1,children:(0,a.jsx)(C,{fontSize:[1],padding:2,tone:"primary",mode:v==="mobile"?"default":"ghost",icon:X,onClick:()=>m(v==="mobile"?"desktop":"mobile")})}),(0,a.jsx)(L,{flex:1,children:(0,a.jsx)(ee,{size:0,textOverflow:"ellipsis",children:l})}),(0,a.jsxs)(p,{align:"center",gap:1,children:[s?.button?(0,a.jsx)(C,{fontSize:[1],padding:2,icon:Z,title:"Reload","aria-label":"Reload",onClick:()=>Y()}):null,(0,a.jsx)(C,{fontSize:[1],icon:q,padding:[2],title:"Copy","aria-label":"Copy",onClick:()=>{var x;(x=w?.current)!=null&&x.value&&Je(w.current.value)}}),(0,a.jsx)(C,{fontSize:[1],icon:K,padding:[2],text:"Open",tone:"primary",onClick:()=>window.open(l)})]})]})}),(0,a.jsx)(z,{tone:"transparent",padding:v==="mobile"?2:0,style:{height:"100%"},children:(0,a.jsx)(p,{align:"center",justify:"center",style:{height:"100%"},children:(0,a.jsx)("iframe",mt({ref:E,title:"preview",style:G[v],frameBorder:"0",src:l},f))})})]})]}):(0,a.jsx)(P,{children:(0,a.jsx)(p,{padding:5,align:"center",justify:"center",children:(0,a.jsx)(te,{})})})}var je=t(Ge()),He="sanity.preview.secret",gt=e=>je.default`*[_id == $id && dateTime(_updatedAt) > dateTime(now()) - ${e}][0].secret`,yt="preview.secret";async function Ue(e,r,n){let i=await e.fetch(gt(n?1800:3600),{id:r});if(!i&&n){let c=n===!0?Math.random().toString(36).slice(2):n();try{let s=e.patch(r).set({secret:c});return await e.transaction().createIfNotExists({_id:r,_type:r}).patch(s).commit({tag:yt}),c}catch(s){console.error("Failed to create a new preview secret. Ensure the `client` has a `token` specified that has `write` permissions.",s)}}return i}async function Ne(e,r){var f,l;let n="https://www.example.com",i=((f=window==null?void 0:window.location)==null?void 0:f.hostname)==="localhost"?window.origin:n,c=new URL("/resource/preview",i);if(!((l=e==null?void 0:e.slug)!=null&&l.current))return c.toString();c.searchParams.set("slug",e.slug.current);let s=await Ue(r,He,!0);return s&&c.searchParams.set("secret",s),c.toString()}var Ve=e=>e.list().id("root").title("Content").items([e.documentListItem().schemaType("home").icon(D).id("home").title("Home"),e.divider(),e.documentTypeListItem("record").title("Products").icon(T),e.documentTypeListItem("artist").title("Category").icon(M),e.divider(),e.documentTypeListItem("genre").title("Tags").icon(O)]),We=(e,{schemaType:r,getClient:n})=>{let{apiVersion:i}=k(),c=n({apiVersion:i});switch(r){case"record":return e.document().views([e.view.form(),e.view.component(ze).options({url:s=>Ne(s,c),reload:{button:!0}}).title("Preview")]);default:return e.document().views([e.view.form()])}};var Ae={...k(),name:"sanity-remix",title:"Sanity Remix",plugins:[j({structure:Ve,defaultDocumentNode:We})],basePath:"/studio",schema:{types:me}};var Q=t(S()),ht=()=>({title:"Sanity Studio",robots:"noindex"}),vt=()=>[{rel:"stylesheet",href:ue}];function $e(){return(0,Q.jsx)(se,{children:()=>(0,Q.jsx)(oe,{config:Ae})})}export{$e as default,vt as links,ht as meta};
